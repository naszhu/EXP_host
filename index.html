<!DOCTYPE html>
<html>
    <head>
        <title>My experiment</title>
        <!-- <script src="https://unpkg.com/jspsych@8.2.1"></script> -->

        <script src="https://unpkg.com/jspsych@7.3.3"></script> 
        
        <!-- <script src="js/constants.js"></script>
        <script src="js/helpfunctions.js"></script>
        <script src="js/load.js"></script>
        <script src="js/main.js"></script> -->


        <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.0.0"></script>
        <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.0.0"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-fullscreen@1.2.1"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-browser-check@1.0.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-canvas-keyboard-response@1.1.1"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.2.0"></script>
                

        <!-- <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script> -->
        <!-- <script type="module" src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script> -->
        <!-- <script type="module" src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script> -->



        <link href="https://unpkg.com/jspsych@7.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />

        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="jspsych/jspsych.js"></script>
        <script src="jspsych/plugin-html-keyboard-response.js"></script>
        <script src="jspsych/plugin-image-keyboard-response.js"></script>
        <script src="jspsych/plugin-preload.js"></script>
        <script src="jspsych/plugin-survey-text.js"></script>
        <script src="jspsych/plugin-fullscreen.js"></script>
        <script src="jspsych/plugin-survey-multi-choice.js"></script>
        <script src="jspsych/plugin-browser-check.js"></script>
        <script src="jspsych/plugin-canvas-keyboard-response.js"></script>
        <script src="jspsych/plugin-html-button-response.js"></script>
        
        <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" /> -->
        <!-- <script type = "text/javascript" src = "G:/ÊàëÁöÑ‰∫ëÁ´ØÁ°¨Áõò/shulai@iu.edu 2022-09-04 14 28/IUB/Project-context/html exp/main.js"></script> -->
    </head>
    <body>
        
        <div id="jspsych-target"></div>

        <!-- Load your scripts in this exact order -->
        <!-- <script src="js/const_exp.js"></script>     constants like keys, trial counts -->
        <script src="js/const_general.js"></script>     <!-- constants like keys, trial counts -->
        <script src="js/load.js"></script>          <!-- loads picnames.txt and ps.txt -->
        <script src="js/main.js"></script>          <!-- main experiment timeline -->
        <script src="js/helpfunctions.js"></script>       <!-- functions like shuffle, etc. -->
        
        <!-- still script type="module"  -->
    </body>
    <!-- <script> -->
        <script type="module">
            import { initializeApp }   from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
            import {
            getDatabase, ref, push, set, onValue
            } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";


            
            // import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-analytics.js";
            // import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
            // import 'https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js';
            // import { getFirestore, collection,arrayUnion, doc,setDoc, addDoc, serverTimestamp, updateDoc, writeBatch, initializeFirestore, onSnapshot, getDatabase, ref, push, set, onValue} from "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js";
            // import {
            // getDatabase, ref, push, set, onValue
            // } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

      
            const firebaseConfig = {
              apiKey:    "AIzaSy‚Ä¶",                   // ‚Üê your API key
              authDomain:"ctx-e3.firebaseapp.com",     // ‚Üê your auth domain
              databaseURL:"https://ctx-e3-default-rtdb.firebaseio.com", // ‚Üê your RTDB URL
              projectId: "ctx-e3",
              storageBucket:"ctx-e3.appspot.com",
              messagingSenderId:"698148278501",
              appId:      "1:698148278501:web:‚Ä¶",
              measurementId:"G-3XC7RRXVPT"
            };
      
            // Initialize Firebase and Realtime Database
            const app = initializeApp(firebaseConfig);
            const db  = getDatabase(app);
      
            // Expose for global use (e.g. keep-alive listener in main.js)
            
            window.db = db;
            window.ref   = ref;
            window.push  = push;
            window.set   = set;
            window.onValue = onValue;
            

            // window.collection = collection;
            // window.doc = doc;
            // window.addDoc = addDoc;
            // window.setDoc = setDoc;
            // window.updateDoc = updateDoc;
            // window.arrayUnion = arrayUnion;
            // window.writeBatch = writeBatch;
            // window.onSnapshot = onSnapshot;
            // // window.setDoc = docref;
            // window.serverTimestamp = serverTimestamp;
      
            console.log("Realtime Database initialized", db);
          </script>

    <script>
        // üé® Style and experiment start
        var cssRules = `
            /* Hide the Continue button */
            .jspsych-btn {
            display: none !important;
            margin: 0 auto;
            }

            .jspsych-html-button-response-button .jspsych-btn {
            display: block !important; /* or 'inline-block', 'flex', etc. */
            }
        `;

        document.body.style.backgroundColor = "white";
        var styleElement = document.createElement('style');
        styleElement.appendChild(document.createTextNode(cssRules));
        document.head.appendChild(styleElement);

        console.log("Firebase initialized. Starting experiment...");
        runExperiment( )
    </script>
</html>